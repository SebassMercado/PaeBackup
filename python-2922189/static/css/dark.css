/* Dark mode overrides global */
/* Usa body.dark-mode para activar. Aprovecha variables de estilos.css */
body.dark-mode {
  --surface-0: #121212;
  --surface-1: #1e1e1f;
  --surface-2: #242526;
  --surface-3: #2d2f31;
  --border-color: #34363a;
  --text-color-strong: #f5f7fa;
  --text-color: #d0d3d7;
  --text-color-dim: #9aa0a6;
  --accent: var(--color-principal, #dc3545);
  --accent-hover: var(--color-principal-hover, #b71c1c);
  --danger: #ef4444;
  --warning: #f59e0b;
  --success: #22c55e;
  --info: #0ea5e9;
  color: var(--text-color);
  background-color: var(--surface-0);
}

/* Scrollbar */
body.dark-mode ::-webkit-scrollbar {width:10px;}
body.dark-mode ::-webkit-scrollbar-track {background: var(--surface-1);} 
body.dark-mode ::-webkit-scrollbar-thumb {background: var(--surface-3);border-radius:6px;} 
body.dark-mode ::-webkit-scrollbar-thumb:hover {background: var(--accent);} 

/* Generic containers */
body.dark-mode .card,
body.dark-mode .cards__card,
body.dark-mode .info-card,
body.dark-mode .pagos-container,
body.dark-mode .estadisticas-modern .stat-card-modern,
body.dark-mode .form-container,
body.dark-mode .usuario__perfil,
body.dark-mode .usuario__objetivos,
body.dark-mode .contenedor-info {
  background: var(--surface-2) !important;
  border: 1px solid var(--border-color) !important;
  box-shadow: 0 4px 16px -4px rgba(0,0,0,.6);
}

/* Headings */
body.dark-mode h1, body.dark-mode h2, body.dark-mode h3, body.dark-mode h4, body.dark-mode h5 {
  color: var(--text-color-strong);
}

/* Text muted */
body.dark-mode .text-muted, body.dark-mode .help-text, body.dark-mode small, body.dark-mode .card-nombre {
  color: var(--text-color-dim) !important;
}

/* Tables */
body.dark-mode table {background: var(--surface-2); color: var(--text-color);} 
body.dark-mode table thead {background: linear-gradient(90deg,var(--surface-3),var(--surface-2)); color: var(--text-color-strong);} 
body.dark-mode table thead th {border-bottom: 1px solid var(--border-color);} 
body.dark-mode table tbody tr {transition: background .25s;} 
body.dark-mode table tbody tr:nth-child(even){background: var(--surface-1);} 
body.dark-mode table tbody tr:hover {background: var(--surface-3);} 
body.dark-mode table td {border-bottom: 1px solid var(--border-color);} 

/* Empty states */
body.dark-mode .empty-state, body.dark-mode .empty-state-table {background: var(--surface-2); color: var(--text-color);} 

/* Badges (estado, tipo, etc) */
body.dark-mode .estado-badge.activo {background: rgba(34,197,94,.15); color: var(--success);} 
body.dark-mode .estado-badge.vencido {background: rgba(239,68,68,.15); color: var(--danger);} 
body.dark-mode .estado-badge.inactivo {background: rgba(156,163,175,.18); color: var(--text-color);} 
body.dark-mode .tipo-badge {background: rgba(234,88,12,.18); color:#fb923c; border:1px solid rgba(234,88,12,.35);} 

/* Inputs & selects */
body.dark-mode input, body.dark-mode select, body.dark-mode textarea {
  background: var(--surface-1) !important;
  color: var(--text-color) !important;
  border: 1px solid var(--border-color) !important;
}
body.dark-mode input:focus, body.dark-mode select:focus, body.dark-mode textarea:focus {
  outline: 2px solid var(--accent);
  box-shadow: 0 0 0 3px rgba(220,53,69,.25);
}

/* Buttons base */
body.dark-mode .btn, 
body.dark-mode .btn-primary,
body.dark-mode .btn-secondary,
body.dark-mode .export-btn,
body.dark-mode .btn-back,
body.dark-mode .btn-back-secondary,
body.dark-mode .btn-recetas {
  background: var(--accent);
  color: #fff !important;
  border: 1px solid var(--accent);
}
body.dark-mode .btn:hover,
body.dark-mode .btn-primary:hover,
body.dark-mode .btn-secondary:hover,
body.dark-mode .export-btn:hover,
body.dark-mode .btn-back:hover,
body.dark-mode .btn-back-secondary:hover,
body.dark-mode .btn-recetas:hover {
  background: var(--accent-hover);
  border-color: var(--accent-hover);
}

/* Outline buttons */
body.dark-mode .btn-outline-success {background: transparent; color: #22c55e; border:1px solid #22c55e;} 
body.dark-mode .btn-outline-success:hover {background:#22c55e; color:#fff;} 
body.dark-mode .btn-outline-danger {background: transparent; color:#ef4444; border:1px solid #ef4444;} 
body.dark-mode .btn-outline-danger:hover {background:#ef4444; color:#fff;} 

/* Delete button */
body.dark-mode .btn-delete {background: rgba(239,68,68,.15); color:#ef4444; border:1px solid rgba(239,68,68,.35);} 
body.dark-mode .btn-delete:hover {background:#ef4444; color:#fff;} 

/* Modals */
body.dark-mode .modal-content {background: var(--surface-2) !important; border:1px solid var(--border-color); color: var(--text-color);} 
body.dark-mode .modal-header {background: linear-gradient(135deg,var(--surface-3),var(--surface-2)); color: var(--text-color-strong);} 
body.dark-mode .modal-footer {background: var(--surface-1); border-top:1px solid var(--border-color);} 

/* Pagination */
body.dark-mode .paginacion, body.dark-mode .pagination-controls a, body.dark-mode .pagination-info {color: var(--text-color);} 
body.dark-mode .btn-pag {background: var(--surface-1); color: var(--text-color); border:1px solid var(--border-color);} 
body.dark-mode .btn-pag:hover {background: var(--accent); color:#fff; border-color: var(--accent);} 

/* Alerts */
body.dark-mode .alert-success {background: rgba(34,197,94,.18); color: var(--success);} 
body.dark-mode .alert-warning {background: rgba(245,158,11,.18); color: var(--warning);} 
body.dark-mode .alert-info {background: rgba(14,165,233,.18); color: var(--info);} 
body.dark-mode .alert-danger {background: rgba(239,68,68,.22); color: var(--danger);} 

/* Footer/info panels */
body.dark-mode .footer-info {background: var(--surface-2); color: var(--text-color-dim); border-top:1px solid var(--border-color);} 

/* Forms helper */
body.dark-mode .help-text {color: var(--text-color-dim);} 

/* Stat cards (modern) */
body.dark-mode .stat-card-modern {background: var(--surface-2); border:1px solid var(--border-color);} 
body.dark-mode .stat-icon-modern.total {background: var(--accent); color:#fff;} 
body.dark-mode .stat-icon-modern.activos {background:#22c55e; color:#fff;} 
body.dark-mode .stat-icon-modern.inactivos {background:#ef4444; color:#fff;} 

/* Wrapper borders */
body.dark-mode .wrapper {border:1px solid var(--border-color); box-shadow:0 4px 14px -4px rgba(0,0,0,.5);} 

/* Section headers */
body.dark-mode .section-header {border-bottom:2px solid var(--accent);} 

/* Links */
body.dark-mode a {color: var(--accent);} 
body.dark-mode a:hover {color: var(--accent-hover);} 

/* Badges de recetas modal */
body.dark-mode .receta-cantidad-pill {background: var(--surface-3); color: var(--text-color-strong);} 
body.dark-mode .receta-subtotal-pill {background: var(--accent); color:#fff;} 
body.dark-mode .recetas-table thead tr {background: var(--surface-3);} 
body.dark-mode .recetas-table tbody tr:hover {background: var(--surface-3);} 
body.dark-mode .recetas-table tfoot td {background: var(--surface-1);} 

/* Shadows / elevation utility */
body.dark-mode .elevated {box-shadow:0 6px 20px -6px rgba(0,0,0,.65);} 

/* Transition smoothing */
body.dark-mode *, body.dark-mode *::before, body.dark-mode *::after {transition: background-color .25s ease, color .25s ease, border-color .25s ease;} 

/* ===== Dashboard specific components (modo oscuro mejorado) ===== */
/* Contenedor general del dashboard */
body.dark-mode .dashboard {color: var(--text-color);}

/* Banner de bienvenida: mantiene el rojo pero baja contraste interno */
body.dark-mode .welcome-banner {box-shadow: 0 10px 30px -8px rgba(0,0,0,.55);} 
body.dark-mode .welcome-alert {background: rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.12);} 
body.dark-mode .alert-content h2 {color:#fff;} 
body.dark-mode .alert-content p {color: rgba(255,255,255,0.78);} 

/* Tarjeta de perfil */
body.dark-mode .profile-card {background: var(--surface-2); border:1px solid var(--border-color); box-shadow:0 6px 20px -6px rgba(0,0,0,.6);} 
body.dark-mode .profile-info h3 {color: var(--text-color-strong);} 
body.dark-mode .profile-role {color: var(--accent);} 
body.dark-mode .profile-email {color: var(--text-color-dim);} 
body.dark-mode .perfil-placeholder {background: linear-gradient(135deg, var(--accent), var(--accent-hover)); box-shadow:0 4px 16px -4px rgba(0,0,0,.6);} 

/* Métricas */
body.dark-mode .metric-card {background: var(--surface-2); border:1px solid var(--border-color); box-shadow:0 4px 16px -4px rgba(0,0,0,.55);} 
body.dark-mode .metric-card:hover {transform: translateY(-6px); box-shadow:0 10px 28px -8px rgba(0,0,0,.7);} 
body.dark-mode .metric-content h4 {color: var(--text-color-strong);} 
body.dark-mode .metric-content p {color: var(--text-color-dim);} 
body.dark-mode .metric-icon {background: linear-gradient(135deg, var(--accent), var(--accent-hover)); -webkit-background-clip:text; background-clip:text;} 

/* Secciones de detalles */
body.dark-mode .details-section {background: var(--surface-2); border:1px solid var(--border-color); box-shadow:0 4px 16px -6px rgba(0,0,0,.55);} 
body.dark-mode .details-section h4 {color: var(--text-color-strong);} 
body.dark-mode .detail-item {background: var(--surface-1); border-left:4px solid var(--accent); color: var(--text-color);} 
body.dark-mode .detail-label {color: var(--text-color-dim);} 
body.dark-mode .detail-value {background: var(--surface-3); color: var(--text-color-strong);} 
body.dark-mode .detail-value.pending {background: rgba(245,158,11,.18); color: var(--warning);} 
body.dark-mode .detail-value.processing {background: rgba(14,165,233,.18); color: var(--info);} 
body.dark-mode .detail-value.completed, body.dark-mode .detail-value.success {background: rgba(34,197,94,.18); color: var(--success);} 

/* Acciones rápidas */
body.dark-mode .action-card {background: var(--surface-2); border:2px solid transparent; box-shadow:0 4px 14px -4px rgba(0,0,0,.55); color: var(--text-color);} 
body.dark-mode .action-card:hover {border-color: var(--accent); box-shadow:0 8px 24px -6px rgba(0,0,0,.7); color: var(--accent);} 
body.dark-mode .action-icon {background: linear-gradient(135deg, var(--accent), var(--accent-hover)); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;} 

/* Productos destacados */
body.dark-mode .product-card {background: var(--surface-2); border:1px solid var(--border-color); box-shadow:0 4px 16px -6px rgba(0,0,0,.55);} 
body.dark-mode .product-card:hover {box-shadow:0 10px 30px -8px rgba(0,0,0,.7); border-color: var(--accent);} 
body.dark-mode .product-card h4 {color: var(--text-color-strong);} 
body.dark-mode .product-card p {color: var(--text-color-dim);} 
body.dark-mode .product-image {box-shadow:0 4px 18px -6px rgba(0,0,0,.6);} 

/* Showcase empanadas */
body.dark-mode .empanada-img.small {box-shadow:0 4px 12px -4px rgba(0,0,0,.55);} 
body.dark-mode .empanada-img.small:hover {transform:scale(1.08);} 

/* ===== Recetas (cards y filtros) ===== */
body.dark-mode .filtros-columnas {background: var(--surface-2); border:1px solid var(--border-color); box-shadow:0 4px 12px -6px rgba(0,0,0,.5);} 
body.dark-mode .filtro-columna {background: var(--surface-1); border:1px solid var(--border-color);} 
body.dark-mode .column-title {color: var(--text-color-strong);} 
body.dark-mode .column-title i {color: var(--accent);} 
body.dark-mode .filter-input {background: var(--surface-1); border:1px solid var(--border-color); color: var(--text-color);} 
body.dark-mode .filter-input::placeholder {color: var(--text-color-dim);} 
body.dark-mode .filter-input:focus {border-color: var(--accent); box-shadow:0 0 0 2px rgba(220,53,69,.25);} 
body.dark-mode .filtros-activos {background: rgba(34,197,94,.15); border-color: rgba(34,197,94,.35); color: var(--success);} 

body.dark-mode .recetas-grid {background: transparent;} 
body.dark-mode .receta-card {background: var(--surface-2); border:1px solid var(--border-color); box-shadow:0 4px 14px -6px rgba(0,0,0,.55);} 
body.dark-mode .receta-card:hover {box-shadow:0 8px 24px -8px rgba(0,0,0,.65);} 
body.dark-mode .receta-titulo {color: var(--text-color-strong);} 
body.dark-mode .receta-descripcion {color: var(--text-color-dim);} 
body.dark-mode .receta-stats .stat-item i {color: var(--accent);} 
body.dark-mode .receta-stats span {color: var(--text-color);} 
body.dark-mode .precio-badge {background: linear-gradient(135deg,var(--accent),var(--accent-hover)); box-shadow:0 4px 12px -4px rgba(0,0,0,.6);} 
body.dark-mode .estado-badge.activo {background: rgba(34,197,94,.18); color: var(--success);} 
body.dark-mode .estado-badge.inactivo {background: rgba(239,68,68,.18); color: var(--danger);} 
body.dark-mode .disponibilidad-badge.disponible {color: var(--success);} 
body.dark-mode .disponibilidad-badge.no-disponible {color: var(--danger);} 
body.dark-mode .receta-actions {border-top:1px solid var(--border-color);} 

body.dark-mode .pagination-container {background: var(--surface-2); border:1px solid var(--border-color); box-shadow:0 4px 14px -6px rgba(0,0,0,.55);} 
body.dark-mode .pagination .page-link {background: var(--surface-1); color: var(--accent); border:1px solid var(--border-color);} 
body.dark-mode .pagination .page-link:hover {background: var(--accent); color:#fff; border-color: var(--accent);} 
body.dark-mode .page-item.active .page-link {background: var(--accent); color:#fff; border-color: var(--accent);} 
body.dark-mode .pagination-info {color: var(--text-color-dim);} 

body.dark-mode #modalMigrar .modal-content {background: var(--surface-2); border:1px solid var(--border-color); color: var(--text-color);} 
body.dark-mode #modalMigrar .modal-body {color: var(--text-color);} 
body.dark-mode #modalMigrar .help-text {color: var(--text-color-dim);} 

/* ===== Usuarios - Envío de correos ===== */
body.dark-mode .campo-destinatarios {background: var(--surface-2); border:1px solid var(--border-color);} 
body.dark-mode .label-principal {color: var(--text-color-strong);} 
body.dark-mode .controles-seleccion .btn-control {background: var(--surface-1); border:1px solid var(--border-color); color: var(--text-color);} 
body.dark-mode .controles-seleccion .btn-control:hover {background: var(--accent); color:#fff; border-color: var(--accent);} 
body.dark-mode .contador-seleccionados {background: var(--accent); color:#fff;} 
body.dark-mode .lista-usuarios {background: var(--surface-1); border:1px solid var(--border-color);} 
body.dark-mode .usuario-item {border-bottom:1px solid var(--border-color);} 
body.dark-mode .usuario-checkbox:hover {background: var(--surface-2);} 
body.dark-mode .checkbox-custom {border-color: var(--border-color);} 
body.dark-mode .usuario-nombre {color: var(--text-color-strong);} 
body.dark-mode .correo {color: var(--text-color-dim);} 
body.dark-mode .rol {background: var(--surface-3); color: var(--text-color);} 
body.dark-mode .vista-previa {background: var(--surface-2); border:1px solid var(--border-color);} 
body.dark-mode .email-preview {background: var(--surface-1); border:1px solid var(--border-color);} 
body.dark-mode .email-header {border-bottom:1px solid var(--border-color);} 
