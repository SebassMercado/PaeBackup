<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Gestión de Pedidos</title>
        <link rel="stylesheet" 
              href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
    </h:head>
    <h:body styleClass="body">

        <ui:include src="/views/Navbar.xhtml" />
        <f:event type="preRenderView" listener="#{pedidosBean.cargarPedidos()}"/>
        <center>
            <div class="container mt-5" style="max-width: 1600px">
                <div class="card shadow p-3">
                    <h1>Gestión de Pedidos</h1>


                    <h:form>
                        <h:commandButton value="Reporte PDF"  style="margin-left: 10px" styleClass="btn btn-primary" actionListener="#{pedidosBean.exportarPDF}"/>
                        <h:commandButton/>
                        <h:commandButton value="Migrar"
    action="/views/Pedidos/migrarPedidos.xhtml?faces-redirect=true"
    styleClass="btn btn-primary" />
                        <br/><br/>
                       <p:dataTable value="#{pedidosBean.listaPedidos}" var="ped"
             widgetVar="wtPedidos"
             filteredValue="#{pedidosBean.listaPedidosFiltrados}"
             paginator="true" rows="10"
             filterEvent="keyup">
    <f:facet name="header">
        <div align="right">
            <p:inputText id="globalFilter" onkeyup="PF('wtPedidos').filter()" style="width:10rem"
                         placeholder="Buscar ..." />
        </div>
    </f:facet>
    <p:column filterBy="#{ped.idPedido}" filterMatchMode="contains" sortBy="#{ped.idPed}">
        <f:facet name="header">ID</f:facet>
        <h:outputText value="#{ped.idPed}" />
    </p:column>
    <p:column filterBy="#{ped.nombreCliente}" filterMatchMode="contains" sortBy="#{ped.nombreCliente}">
        <f:facet name="header">Cliente</f:facet>
        <h:outputText value="#{ped.nombreCliente}" />
    </p:column>
    <p:column filterBy="#{ped.estado}" filterMatchMode="contains" sortBy="#{ped.estado}">
        <f:facet name="header">Estado</f:facet>
        <h:outputText value="#{ped.estado}" />
    </p:column>
    <p:column filterBy="#{ped.fechaEntrega}" filterMatchMode="contains" sortBy="#{ped.fechaEntrega}">
        <f:facet name="header">Entrega</f:facet>
        <h:outputText value="#{ped.fechaEntrega}" />
    </p:column>
    <p:column filterBy="#{ped.observacionesPedido}" filterMatchMode="contains" sortBy="#{ped.observacionesPedido}">
        <f:facet name="header">Observaciones</f:facet>
        <h:outputText value="#{ped.observacionesPedido}" />
    </p:column>
    <!-- Opciones -->
</p:dataTable>
                        <br/>
                        <p:commandButton 
                            value="Menu anterior" icon="pi pi-home" action="/views/Dashboard.xhtml?faces-redirect=true" />
                    </h:form>
                </div>
            </div>
        </center>
    </h:body>
</html>